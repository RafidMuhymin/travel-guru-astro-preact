---
const {title} = Astro.props
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/astro.css">
    <title>Travel Guru | {title}</title>
</head>
<body>
<header id="header" class="p-3 flex flex-row items-center justify-between">
    <div>
        <a href="/" >
            <img src="/logo.png" alt="Travel Guru Brand Logo">
        </a>
    </div>
    <nav>
      <div class="dropdown relative inline-block p-2 mx-2">
            <button class="bg-[#04aa6d]  text-white p-2 border-0">Dropdown</button>
            <div class="hidden absolute bg-[#f1f1f1] min-w-[160px] z-[1]">
                <a href="/homeshot" class="text-black no-underline block py-[12px] px-[16px] hover:bg-[#ddd]">HomeShot</a>
                <a href="/bookingshot" class="text-black no-underline block py-[12px] px-[16px] hover:bg-[#ddd]">BookingShot</a>
                <a href="/loginshot" class="text-black no-underline block py-[12px] px-[16px] hover:bg-[#ddd]">LoginShot</a>
                <a href="/searchshot" class="text-black no-underline block py-[12px] px-[16px] hover:bg-[#ddd]">SearchShot</a>
                <a href="/create-account-shot" class="text-black no-underline block py-[12px] px-[16px] hover:bg-[#ddd]">CAShot</a>
            </div>
        </div>
        <button onclick="navigate('/homeshot')">HomeShot</button>
        <a class="p-2 mx-2" href="/home">Home</a>
        <a class="p-2 mx-2" href="/login">Login</a>
        <a class="p-2 mx-2" href="/register">Register</a>
        <a class="p-2 mx-2" href="/booking">Booking</a>
    </nav>
</header>
    <main id="root">
    <slot></slot>
    </main>
</body>
<script>
  const spafy = () => {
    const links = document.querySelectorAll('a[href^="/"');
    links.forEach((element) => {
      element.addEventListener("mouseover", (e) => {
        const { href } = e.target;
        const link = document.querySelector('link[href="' + href + '"]');
        if (!link) {
          const prefetchLink = document.createElement("link");
          prefetchLink.href = href;
          prefetchLink.rel = "prefetch";
          document.head.appendChild(prefetchLink);
        }
      });
      element.addEventListener("click", (e) => {
        if (!window.event.ctrlKey) {
            e.preventDefault();
            if (location.href !== e.target.href) {
            fetch(e.target.href)
            .then((res) => res.text())
            .then((html) => {
            const parser = new DOMParser();
            const dom = parser.parseFromString(html, "text/html");
            const pageHTML = dom.querySelector("html").innerHTML;
            const pageTitle = dom.querySelector("title").innerText;
            const htmlElement = document.querySelector("html");
            htmlElement.innerHTML = pageHTML;
            history.pushState({}, pageTitle, e.target.href);
            spafy();
            });
            }
        }
      });
    });
  };
  spafy();
  window.navigate = (href) => {
    fetch(href)
    .then((res) => res.text())
    .then((html) => {
    const parser = new DOMParser();
    const dom = parser.parseFromString(html, "text/html");
    const pageHTML = dom.querySelector("html").innerHTML;
    const pageTitle = dom.querySelector("title").innerText;
    const htmlElement = document.querySelector("html");
    htmlElement.innerHTML = pageHTML;
    history.pushState({}, pageTitle, href);
    spafy();
    });
  }
</script>
</html>